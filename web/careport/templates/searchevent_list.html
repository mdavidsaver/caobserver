{% extends "base.html" %}

{% load tz %}

{% block title %} - Search Events{% endblock %}
{% block banner %} - Search Events{% endblock %}
{% block extrabanner %}
<form style="width: 40em;" action="" method="get">
    {{ form }}
    <input type="submit" value="Search" />
</form>
{% endblock %}

{% block extracss %}
#id_expr {
    width: 30em;
}
{% endblock %}

{% block extrahead %}
<noscript><meta http-equiv="refresh" content="30"></noscript>
<script>
(function($) {
    ($(document).ready(function (){
        $("#maintable")
        .xLiveTable({mangle:mangleCAData({addrkey:"source"})})
        ;
    }))
}(jQuery));
</script>
{% endblock %}

{% block main %}
{% include "paginator.html" %}
<table id="maintable" class="catable"><thead>
<tr><th atag="source">Client</th><th atag="desc">Event</th>
<th atag="pv">PV</th><th atag="time">Time</th></tr>
</thead><tbody>
{% for event in object_list %}
<tr class="{% cycle 'even' 'odd' %}">
<td>{{ event.source.host }}:{{ event.source.port }}</td>
<td>{{ event.desc|default:'unknown' }}</td>
<td>{{ event.pv }}</td>
<td>{{ event.time|localtime|date:'r' }}</td></tr>
{% empty %}
<tr><td align="center" colspan="4"><b>No Events</b></td></tr>
{% endfor %}
</tbody></table>
{% include "paginator.html" %}
{% endblock %}
